#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Создание Markdown файла с кодировкой UTF-8 с BOM для Cursor
"""

import sys
from pathlib import Path

def create_md_file_with_bom(file_path, content):
    """Создает markdown файл с кодировкой UTF-8 с BOM"""
    file_path = Path(file_path)
    file_path.parent.mkdir(parents=True, exist_ok=True)
    
    # 'utf-8-sig' автоматически добавляет BOM при записи
    with open(file_path, 'w', encoding='utf-8-sig', newline='\n') as f:
        f.write(content)
    
    print(f"✓ Файл создан: {file_path}")
    print(f"  Кодировка: UTF-8 с BOM (utf-8-sig)")
    return True

if __name__ == '__main__':
    base_dir = Path(__file__).parent.parent.resolve()
    
    # Создаем тестовый файл
    content = """# Тестовый Markdown файл

Это тестовый файл для проверки форматирования Markdown.

## Заголовок второго уровня

### Заголовок третьего уровня

#### Заголовок четвертого уровня

---

## Форматирование текста

**Жирный текст**

*Курсив*

***Жирный курсив***

~~Зачеркнутый текст~~

`Моноширинный код`

---

## Списки

### Нумерованный список

1. Первый элемент
2. Второй элемент
3. Третий элемент
   1. Вложенный элемент
   2. Еще один вложенный

### Маркированный список

- Элемент списка
- Еще один элемент
  - Вложенный элемент
  - Еще один вложенный
- Третий элемент

---

## Ссылки

[Текст ссылки](https://example.com)

[Ссылка с заголовком](https://example.com "Заголовок ссылки")

---

## Код

### Инлайн код

Используй функцию `print()` для вывода.

### Блок кода

```python
def hello_world():
    print("Hello, World!")
    return True
```

```bsl
Процедура Тест()
    Сообщить("Тест");
КонецПроцедуры
```

---

## Таблицы

| Заголовок 1 | Заголовок 2 | Заголовок 3 |
|-------------|-------------|-------------|
| Ячейка 1    | Ячейка 2    | Ячейка 3    |
| Данные A    | Данные B    | Данные C    |

---

## Цитаты

> Это цитата. Она может содержать несколько строк.
> 
> И даже несколько абзацев.

---

## Проверка кириллицы

Русский текст должен отображаться корректно.

Специальные символы: © ® ™ € £ ¥ § ¶ † ‡ • … — – « »

---

**Дата создания:** 2024-01-01  
**Версия:** 1.0
"""
    
    file_path = base_dir / 'Проекты' / 'test_full.md'
    
    if create_md_file_with_bom(file_path, content):
        print("\n✓ Файл создан с правильной кодировкой UTF-8 с BOM")
        print("  Теперь он должен открываться в Cursor Markdown Preview")
        sys.exit(0)
    else:
        print("\n✗ Ошибка создания файла")
        sys.exit(1)


