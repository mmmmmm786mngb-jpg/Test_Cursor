# Стандарты комментирования кода 1С:Enterprise (BSL)

## ОБЯЗАТЕЛЬНЫЕ КОММЕНТАРИИ

### 1. Документирующие комментарии для процедур и функций

**ВСЕГДА** добавляй полный документирующий комментарий для:

- Всех экспортных процедур и функций
- Процедур и функций программного интерфейса модулей
- Сложных внутренних методов

**Структура обязательного комментария:**

```bsl
// Описание: Краткое описание назначения процедуры/функции (одна строка)
//           Дополнительное описание особенностей работы (при необходимости)
//
// Параметры:
//   <ИмяПараметра1> - <Тип> - описание назначения параметра
//   <ИмяПараметра2> - <Тип> - описание назначения параметра
//
// Возвращаемое значение:
//   <Тип> - описание возвращаемого значения (только для функций)
//
// Пример:
//   Результат = ВычислитьНДС(1000, 20); // Вернет 200
//
Функция ВычислитьНДС(сумма, ставкаНДС)
    // Тело функции
КонецФункции
```

### 2. Комментарии к сложным алгоритмам

**ВСЕГДА** комментируй:

- Нестандартные алгоритмы и логику
- Временные решения (TODO/FIXME)
- Обходы ограничений платформы
- Интеграционные участки кода

```bsl
// TODO: Оптимизировать запрос после обновления платформы до 8.3.25
// FIXME: Временное решение для обхода ошибки платформы #123456
// NOTE: Особенность работы с регистрами в режиме совместимости
```

## ЗАПРЕЩЕННЫЕ ПРАКТИКИ

### ❌ НЕ делай

```bsl
// Плохие примеры комментариев:

Процедура = РассчитатьСумму(); // Рассчитывает сумму (избыточно!)
i = i + 1; // Увеличиваем i на 1 (очевидно!)
// Процедура для расчета (неинформативно!)
```

### ❌ Избегай

- Комментариев, дублирующих код
- Неактуальных комментариев (хуже чем их отсутствие)
- Комментариев на английском языке (только русский!)
- Закомментированного старого кода (удаляй!)

## СПЕЦИАЛЬНЫЕ ТИПЫ КОММЕНТАРИЕВ

### 1. Комментарии для условной компиляции

```bsl
// #Если ТолстыйКлиентОбычноеПриложение Тогда
    // Код для толстого клиента
// #КонецЕсли
```

## АВТОМАТИЗАЦИЯ И ИНСТРУМЕНТЫ

### 1. Шаблоны для стандартных комментариев

Создавай шаблоны для стандартных комментариев:

```bsl
// Шаблон для функций
// Описание: ${Описание функции}
// Параметры:
//   ${параметр} - ${Тип} - ${описание}
// Возвращаемое значение:
//   ${Тип} - ${описание}
Функция ${ИмяФункции}(${параметры})
    ${код}
КонецФункции
```

### 2. Проверка актуальности

Регулярно проверяй соответствие комментариев коду:

- При рефакторинге обновляй комментарии
- Удаляй устаревшие комментарии
- Проверяй корректность типов в документации

## ИНТЕГРАЦИЯ С ИНСТРУМЕНТАМИ

### 1. Генерация документации

Правильно оформленные комментарии могут использоваться для:

- Автоматической генерации технической документации
- Создания справочных материалов
- Обучения новых разработчиков

## ПРИМЕРЫ ПРАВИЛЬНОГО КОММЕНТИРОВАНИЯ

```bsl
// Описание: Выполняет проведение документа с проверкой прав доступа
//           Автоматически устанавливает дату проведения, если не указана
//
// Параметры:
//   ДокументОбъект - ДокументОбъект - ссылка на объект документа для проведения
//   ДатаПроведения - Дата - дата проведения документа (необязательный)
//   РежимПроведения - РежимПроведенияДокумента - режим проведения (по умолчанию: Оперативный)
//
// Возвращаемое значение:
//   Булево - Истина, если документ успешно проведен; Ложь в случае ошибки
//
// Пример:
//   Результат = ПровестиДокументБезопасно(ДокументПродажи, '20240928', РежимПроведенияДокумента.Оперативный);
//
&НаСервере
Функция ПровестиДокументБезопасно(ДокументОбъект, ДатаПроведения = Неопределено, РежимПроведения = Неопределено)
    
    Если НЕ ПравоДоступа("Проведение", ДокументОбъект.Метаданные()) Тогда
        ВызватьИсключение "Недостаточно прав для проведения документа";
    КонецЕсли;
    
    Если НЕ ЗначениеЗаполнено(ДатаПроведения) Тогда
        ДатаПроведения = ТекущаяДатаСеанса();
    КонецЕсли;
    
    Если РежимПроведения = Неопределено Тогда
        РежимПроведения = РежимПроведенияДокумента.Оперативный;
    КонецЕсли;
    
    Попытка
        // Выполняем проведение документа
        ДокументОбъект.ДатаПроведения = ДатаПроведения;
        ДокументОбъект.Записать(РежимЗаписиДокумента.Проведение, РежимПроведения);
        
        Возврат Истина;
        
    Исключение
        // Логируем ошибку проведения
        ТекстОшибки = "Ошибка проведения документа: " + ОписаниеОшибки();
        ЗаписьЖурналаРегистрации("ПроведениеДокумента", УровеньЖурналаРегистрации.Ошибка, 
            ДокументОбъект.Метаданные(), ДокументОбъект.Ссылка, ТекстОшибки);
        
        Возврат Ложь;
        
    КонецПопытки;
    
КонецФункции
```

Эти правила обеспечат единообразие комментирования и повысят качество документации кода в проектах 1С.
